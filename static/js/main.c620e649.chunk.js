(window["webpackJsonpstreet-fighter-react-redax"]=window["webpackJsonpstreet-fighter-react-redax"]||[]).push([[0],{160:function(e,t,a){e.exports=a(381)},165:function(e,t,a){},166:function(e,t,a){},381:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(150),c=a.n(i),s=(a(165),a(166),a(24)),l=a(153),o=a(154),u=a(15),h=a(61),f=a(32),m=a(7),g=a.n(m),d={},p={ids:[]},E={isOpen:!1},v={ids:[]},b=Object(s.combineReducers)({routing:h.routerReducer,fighters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"FETCH_FIGHTERS_SUCCESS":var r=g.a.indexBy(g.a.prop("_id"),n);return g.a.merge(e,r);default:return e}},fightersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"FETCH_FIGHTERS_SUCCESS":return g.a.merge(e,{ids:g.a.pluck("_id",n)});default:return e}},dialogFighter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_FIGHTER_BY_ID_SUCCESS":return g.a.merge(e,n);default:return e}},arena:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"PUSH_FIGHTER_ID_TO_ARENA_SUCCESS":return g.a.merge(e,{ids:g.a.append(n,e.ids)});default:return e}}}),y=function(e){var t=e.children;return r.a.createElement("div",{className:"layout"},t)},_=a(28),T=a(62),k=a(63),S=a(66),O=a(64),H=a(67),N=a(65),F=a.n(N),w=a(25),C=a.n(w),B=a(41),I=function(e,t){return fetch("http://www.mocky.io/v2/"+e,{method:t}).then((function(e){return e.ok?e.json():Promise.reject(Error("Failed to load"))})).catch((function(e){throw e}))},j=function(){var e=Object(B.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"5d9309a730000067001b719b",e.next=4,I("5d9309a730000067001b719b","GET");case 4:return t=e.sent,e.abrupt("return",t.content);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),R=function(e,t){return g.a.prop(t,e.fighters)},G=function(e){return g.a.map((function(t){return R(e,t)}),e.fightersPage.ids)},A=function(e){return g.a.prop(e.dialogFighter[0],e.fighters)},U=function(e){return g.a.map((function(t){return R(e,t)}),e.arena.ids)},L=function(e){var t=e.closeModal,a=e.that,n=e.fighter;return r.a.createElement("div",{className:"fighter-info"},r.a.createElement("div",{className:"name"},r.a.createElement("h2",null,n.name||"default")),r.a.createElement("span",{className:"border"}),r.a.createElement("div",null,r.a.createElement("div",{className:"values"},r.a.createElement("div",{className:"stats"},r.a.createElement("span",null,"Health:"),r.a.createElement("span",null,n.health||"default")),r.a.createElement("div",{className:"stats"},r.a.createElement("span",null,"Attack:"),r.a.createElement("span",null,n.attack||"default")),r.a.createElement("div",{className:"stats"},r.a.createElement("span",null,"Defence:"),r.a.createElement("span",null,n.defense||"default")))),r.a.createElement("div",{className:"fighterBtnBlock"},r.a.createElement("button",{className:"fighterBtn",onClick:function(){return t(a)}},"Choose ",n.name)))},M=function(e){function t(e){var a;return Object(T.a)(this,t),(a=Object(S.a)(this,Object(O.a)(t).call(this))).state={isOpen:e.visible,arenaControl:[]},a}return Object(H.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchFighters()}},{key:"openModal",value:function(e,t,a){a(t),e.setState({isOpen:!e.state.visible})}},{key:"closeModal",value:function(e){e.setState({isOpen:e.state.visible})}},{key:"fighterToArena",value:function(e,t,a,n){t.state.arenaControl.length<1?(t.setState({arenaControl:[].concat(Object(_.a)(t.state.arenaControl),[a])}),n(a)):1===t.state.arenaControl.length?(t.setState({arenaControl:[].concat(Object(_.a)(t.state.arenaControl),[a])}),n(a),t.startGameBtn.disabled=!1):(console.log(t.state.arenaControl),alert("You cannot add third fighter\nPlease start the game")),e(t)}},{key:"renderFighter",value:function(e,t,a){var n=this;return r.a.createElement("div",{className:"fighter",key:a._id},r.a.createElement("img",{className:"fighter-image",src:a.source,alt:a.source}),r.a.createElement("span",{className:"name"},a.name),r.a.createElement("input",{className:"showModal-btn",type:"button",value:"Fighter info",onClick:function(){return t(n,a._id,e)}}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.fighters,n=t.getFighterById,i=t.fighter,c=t.pushFighterById,s=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"startGame"},r.a.createElement(u.a,{to:"/arena"},r.a.createElement("button",{className:"startGameBtn",ref:function(e){s.startGameBtn=e},disabled:!0},"Start Fight"))),r.a.createElement("div",{className:"fighters"},a.map(this.renderFighter.bind(this,n,this.openModal)),r.a.createElement(F.a,{visible:this.state.isOpen,width:"230",height:"180",effect:"fadeInUp",onClickAway:function(){return e.closeModal(s)}},r.a.createElement(L,{closeModal:function(){e.fighterToArena(e.closeModal,s,i._id,c)},that:this,fighter:i||{}}))))}}]),t}(n.Component),P={fetchFighters:function(){return function(){var e=Object(B.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_FIGHTERS_START"}),e.prev=1,e.next=4,j();case 4:a=e.sent,t({type:"FETCH_FIGHTERS_SUCCESS",payload:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"FETCH_FIGHTERS_FAILURE",payload:e.t0,error:!0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getFighterById:function(e){return function(t){t({type:"GET_FIGHTER_BY_ID_START"});try{t({type:"GET_FIGHTER_BY_ID_SUCCESS",payload:e})}catch(a){t({type:"GET_FIGHTER_BY_ID_FAILURE",payload:a,error:!0})}}},pushFighterById:function(e){return function(t){t({type:"PUSH_FIGHTER_ID_TO_ARENA_START"});try{t({type:"PUSH_FIGHTER_ID_TO_ARENA_SUCCESS",payload:e})}catch(a){t({type:"PUSH_FIGHTER_ID_TO_ARENA_FAILURE",payload:a,error:!0})}}}},D=Object(f.b)((function(e){return{fighters:G(e),fighter:A(e),visible:e.dialogFighter.isOpen}}),P)(M),x=function(e){var t=e.that,a=e.fighter,n=e.fighters,i=e.fighter1Health,c=e.fighter2Health,s=e.index,l=e.reverse,o=e.fight;return r.a.createElement("div",{className:"column",ref:function(e){0===s?t.fighter1Block=e:t.fighter2Block=e}},r.a.createElement("div",{className:"values"},r.a.createElement("div",{className:"name"},r.a.createElement("h2",{className:"custom"},a.name)),r.a.createElement("div",{className:"stats"},r.a.createElement("span",null,"Attack:"),r.a.createElement("span",null,a.attack),r.a.createElement("span",null,"Defence:"),r.a.createElement("span",null,a.defense),r.a.createElement("span",null,"Health:"),r.a.createElement("span",null,0===s?i:c))),r.a.createElement("div",null,r.a.createElement("div",{className:l(s)},r.a.createElement("img",{className:"fighter-image",src:a.source,alt:a.source,ref:function(e){0===s?t.fighter1column=e:t.fighter2column=e}})),r.a.createElement("div",{className:"fighterBtnBlock"},r.a.createElement("button",{className:"punchBtn",onClick:function(){if(0===s)o.apply(void 0,Object(_.a)(n).concat([t,c,s]));else{var e=Object(_.a)(n).reverse();o.apply(void 0,Object(_.a)(e).concat([t,i,s]))}},ref:function(e){0===s?t.punch1Btn=e:t.punch2Btn=e}},"Punch"))))},W=function(e){function t(e){var a;return Object(T.a)(this,t),(a=Object(S.a)(this,Object(O.a)(t).call(this))).state={fighters:e.fighters,fighter1Name:e.fighters[0].name,fighter2Name:e.fighters[1].name,fighter1Health:e.fighters[0].health,fighter2Health:e.fighters[1].health,isOpen:!1},a}return Object(H.a)(t,e),Object(k.a)(t,[{key:"fight",value:function(e,t,a,n,r){var i,c=a.getHitPower(e),s=a.getBlockPower(t);c<=s?(i=0,0===r?(setTimeout((function(){a.fighter2column.classList.toggle("block")}),2700),setTimeout((function(){a.fighter2column.classList.toggle("block")}),3e3)):(setTimeout((function(){a.fighter1column.classList.toggle("block")}),2700),setTimeout((function(){a.fighter1column.classList.toggle("block")}),3e3))):(i=c-s,0===r?(setTimeout((function(){a.fighter2column.classList.toggle("punch")}),2700),setTimeout((function(){a.fighter2column.classList.toggle("punch")}),3e3)):(setTimeout((function(){a.fighter1column.classList.toggle("punch")}),2700),setTimeout((function(){a.fighter1column.classList.toggle("punch")}),3e3))),0===r?(a.punch1Btn.disabled=!0,a.punch2Btn.disabled=!1,a.fighter1column.classList.toggle("animate"),setTimeout((function(){a.setState({fighter2Health:n-i})}),2700)):(console.log(a),a.punch1Btn.disabled=!1,a.punch2Btn.disabled=!0,a.fighter2column.classList.toggle("animate"),a.fighter1column.classList.toggle("animate"),setTimeout((function(){a.fighter2column.classList.toggle("animate")}),3500),setTimeout((function(){a.setState({fighter1Health:n-i})}),2700)),a.state.fighter1Health<=0?a.setState({isOpen:!a.state.isOpen}):a.state.fighter2Health<=0&&a.setState({isOpen:!a.state.isOpen})}},{key:"getHitPower",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=Math.floor(t+Math.random()*(a+1-t)),r=e.attack*n;return r}},{key:"getBlockPower",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=Math.floor(t+Math.random()*(a+1-t)),r=e.defense*n;return r}},{key:"renderFighter",value:function(e,t,a){return r.a.createElement(x,{that:e,fighter:t,fighters:e.state.fighters,fighter1Health:e.state.fighter1Health,fighter2Health:e.state.fighter2Health,index:a,reverse:function(e){return 0===e?"fighter":"fighter rotate"},fight:this.fight,key:t._id})}},{key:"render",value:function(){var e=this.props.fighters;return r.a.createElement("div",{className:"arena-background"},r.a.createElement("div",{className:"arena-fighters"},e.map(this.renderFighter.bind(this,this))),r.a.createElement(F.a,{visible:this.state.isOpen,width:"230",height:"150",effect:"fadeInUp"},r.a.createElement("div",null,r.a.createElement("div",{className:"name"},r.a.createElement("h2",null,this.state.fighter1Health<=0?this.state.fighter2Name:this.state.fighter1Name," Winned")),r.a.createElement("span",{className:"border"}),r.a.createElement("div",{className:"fighterBtnBlock"},r.a.createElement(u.a,{to:"/"},r.a.createElement("button",{className:"fighterBtn"},"Game Over"))))))}}]),t}(n.Component),Y=Object(f.b)((function(e){return{fighters:U(e)}}),null)(W),J=Object(s.createStore)(b,Object(o.composeWithDevTools)(Object(s.applyMiddleware)(l.a))),$=Object(h.syncHistoryWithStore)(u.d,J);var q=function(){return r.a.createElement(f.a,{store:J},r.a.createElement(u.c,{history:$},r.a.createElement(u.b,{component:y},r.a.createElement(u.b,{path:"/",component:D})),r.a.createElement(u.b,{path:"/arena",component:Y})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[160,1,2]]]);
//# sourceMappingURL=main.c620e649.chunk.js.map