import React, { Component } from 'react'
import { connect } from 'react-redux'

import { fetchFighters } from 'actions'
import { getFighters } from 'selectors'

class Fighters extends Component {
  componentDidMount() {
    this.props.fetchFighters()
  }
  renderFighter(fighter, index) {
    return (
      <div className='fighter' key={index}>
        <img 
          className='fighter-image' 
          src={fighter.source} 
          alt={fighter.source} 
        />
        <span className='name'>
          {fighter.name}
        </span>
      </div>
    )
  }
  render() {
    const {fighters} = this.props
    return (
      <div className='fighters'>
        {fighters.map((fighter, index) => this.renderFighter(fighter, index))}
      </div>
    )
  }
}

const mapStateToProps = state => ({
  fighters: getFighters(state)
})

const mapDispatchToProps = {
  fetchFighters
}

export default connect(mapStateToProps, mapDispatchToProps)(Fighters)